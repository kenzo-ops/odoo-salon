<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <!-- Search View dengan filter + group by + searchpanel -->
        <record id="hr_employee_job_search_view" model="ir.ui.view">
            <field name="name">hr.employee.job.search</field>
            <field name="model">hr.employee</field>
            <field name="arch" type="xml">
                <search string="Search Employees">
                    <!-- field pencarian -->
                    <field name="name" string="Employee Name"/>
                    <field name="job_id" string="Job Position"/>

                    <!-- filter manual -->
                    <filter string="Has Job Position"
                            name="has_job"
                            domain="[('job_id', '!=', False)]"/>

                    <!-- group by -->
                    <group expand="1" string="Group By">
                        <filter string="Job Position"
                                name="group_job"
                                context="{'group_by':'job_id'}"/>
                    </group>

                    <!-- Sidebar Filter (Searchpanel) -->
                    <searchpanel>
                        <field name="job_id"
                               string="Job Positions"
                               icon="fa-briefcase"
                               enable_counters="1"
                               select="multi"/>
                    </searchpanel>
                </search>
            </field>
        </record>

        <!-- Action -->
        <record id="hr_employee_branch_action" model="ir.actions.act_window">
            <field name="name">Branch Employees</field>
            <field name="res_model">hr.employee</field>
            <field name="view_mode">list,form</field>
            <field name="domain">[]</field>
            <field name="search_view_id" ref="hr_employee_job_search_view"/>
        </record>

    </data>
</odoo>
